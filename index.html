<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>CG mini-paint</title>
    <script src="libs/d3.js"></script>
    <script src="libs/jquery.js"></script>
    <script src="functions/main.js"></script>
    <script src="functions/frameBuffer.js"></script>
    <script src="functions/bresenham.js"></script>
    <script src="functions/MidpointCircle.js"></script>
    <script src="functions/floodfill.js"></script>
    <script src="functions/scanline.js"></script>
    <script src="functions/poligons.js"></script>
    <script src="functions/Polygon_Clipping.js"></script>
    <script src="functions/mat_multipy.js"></script>
<!--    <script src="functions/Clipping_lines.js"></script>-->
    <script src="functions/Transforms.js"></script>
    <script src="functions/curves_bezier.js"></script>

</head>
<body>
<style>
    body{
        background-color: darkgrey;
    }
    svg{
        background-color: white;
    }

    .main-menu{
        background-color:floralwhite;
        max-width: 200px;
        display: inline-grid;
        float: right;
    }

</style>
    <svg width="800px" height="800" id="painel"  onclick="Coords(event)"></svg>



    <div class="main-menu">
        Bresenham:
        <button type="button" value="bresenham" id="bresenham"  onclick="lines()">
            bresenham
        </button>

        Poligonos:
        <button type="button" value="Poligonos" id="Poligonos"  onclick="Poligonos()">
            Poligonos
        </button>

        circle <input type="button" value="circle" onclick="circle()">

        bezier <input type="button" value="bezier"  onclick="curves()">

        FloodFill <input type="button" value="FloodFill" onclick="fill()">

        Scanline <input type="button" value="Scanline">

        Recorte De Linhas <input type="button" value="Recorte De Linhas">

        Recorte De Poligonos <input type="button" value="Recorte De Poligonos">

        Translação <input type="button" value="Translação">

        Rotatação <input type="button" value="Rotatação">

        Escala <input type="button" value="Escala">

        Projeção Pescectiva <input type="button" value="Projeção Pescectiva">

        Projeção Ortografica <input type="button" value="Projeção Ortografica">


    </div>

<script>

        let svg = d3.select("svg");
        let tam = 10;
        let color = "black";


       let pts1 =[];
       let ptsFill;
       let ptscircle = [];


       let buffer = new frammeBuffer(80,80);

        buffer.redraw(svg);

        function Coords(event) {
            let x = Math.round(event.clientX/10);
            let y = Math.round(event.clientY/10);
            ptsFill = [x,y];
            pts1.push([x,y]);
            ptscircle.push([x,y]);
            buffer.putPixel(x,y,"black");
            buffer.redraw(svg);

            console.log(pts1);

        }


       buffer.redraw(svg);


       // console.log(x1," ",x2);

       function lines() {

           buffer.setPoints(pts1,"white");

           bresenham(pts1,"red");
           buffer.redraw(svg);
           pts1 =[];
           console.log("agora vai");

       };

        function Poligonos(){
            poligon(pts1,"blue");
            buffer.redraw(svg);
            pts1 =[];

        }

        function fill(){
            recursivefilll(ptsFill[0],ptsFill[1],"purple","blue");
            buffer.redraw(svg);

        }

        function circle(){
            let radius;
            if(!ptscircle[1]){
                radius = 5;
            }
            else {
                radius= Math.abs(ptscircle[0][0]-ptscircle[1][0]);
            }

            buffer.setPoints(ptscircle,"white");
            MidpointCircle(radius, ptscircle[0][0],ptscircle[0][1],"blue");
            buffer.redraw(svg);

            ptscircle = [];


        }

        function curves(){
            bezier(pts1);
            buffer.redraw(svg);

            pts1 = [];
        }




       //  let cont =0;
       //  let scl = 0;
       //  var recursiva = function () {
       //      console.log("Se passaram 1 segundo!");
       //      setTimeout(recursiva,50);
       //
       //
       //
       //      let rect  = [[20, 10], [30, 10], [33, 39],[20,30]];
       //
       //      poligon(rect,"green");
       //
       //
       //      let polig = [
       //          [20,30,33,20],
       //          [10,10,39,30],
       //          [1,1,1,1]];
       //
       //      let npoligon =scale(polig,1,1);
       //
       //
       //  npoligon = translate(npoligon,-26,-21);
       //  npoligon = rotacao(npoligon,cont);
       //  npoligon = translate(npoligon,26,21);
       //
       //
       //
       //  console.log(npoligon);
       //  let arrTeste = [];
       //  for (let j = 0; j <npoligon[0].length ; j++) {
       //      arrTeste.push([npoligon[0][j],npoligon[1][j]]);
       //
       //  }
       //
       //
       //  console.log("array teste:",arrTeste);
       //
       //  poligon(rect,"green");
       //  poligon(arrTeste,"pink");
       //  //
       //      //
       //  cont+=20;
       //  scl+=0.2;
       //      if(scl >2){
       //          scl = 0;
       //      }
       //  buffer.redraw(svg);
       //  buffer.clear();
       //  }
       //  recursiva();



        //
        // clipRext(0,0,49,49);
        // bresenham([[20, 20], [60, 20]],"red");
        // cohenSutherlandClip(20, 20, 60, 20);

        // let data = [
        //     [40,10],
        //     [20,50],
        //     [1, 1]];
        //
        // console.log("translate:",translate(data,10,50));
        //
        // console.log("rotate:",rotacao(data,10));
        //
        // console.log("scale:",scale(data,10,20));


        // recursivefilll(3,3,"green","black");

        // bresenham([[5,25],[45,25]]);
        // bresenham([[5,25],[25,5]]);
        // bresenham([[25,5],[45,24]]);

        // console.log(buffer.matriz);
        // console.log(buffer.getPixel(23,17));

        // recursivefilll(20,20,"red","black");
        // // recursivefilll(10,9,"grey","black");
        // MidpointCircle(5,10,10,"red");
        // recursivefilll(10,9,"purple","red");
        //

        // recursivefilll(10,5,"grey","black");

        //
        // let dost = [[10,20],[25,0],[40,20]];
        //
        // poligon(dost);
        // recursivefilll(15,21,"pink","black");


        //poligono
        // let subjectPolygon = [
        //         [5, 15],
        //         [20, 5],
        //         [25, 32],
        //         [20, 25],
        //         [15, 35]
        //         // [100, 200]
        //     ],
        //
        // //poligno de recorte
        // clipPolygon = [[10, 10], [40, 10], [40, 30], [10, 30]];
        //
        //
        // let clippedPolygon = clip(subjectPolygon, clipPolygon);
        // console.log(clippedPolygon);
        // recursivefilll(3,3,"purple","black");
        //
        // // poligon(subjectPolygon,"blue");
        // poligon(clipPolygon,"green");
        //
        // poligon(clippedPolygon,"red");
        // recursivefilll(17,17,"pink","red");

        // bresenham([[35,35],[30,25]]);
        // bresenham([[30,25],[5,15]]);
        // bresenham([[5,15],[10,5]]);
        // recursivefilll(24,13,"purple","black");

        // buffer.redraw(svg);

</script>

</body>
</html>